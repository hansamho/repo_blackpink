<!DOCTYPE html>
<html lang="en">

	<head th:replace="~{adm/infra/include/head :: head}"></head>

	<body class="login-container">
		<!-- Login box start -->
		<div class="container">
			<form action="admindex.html" class="row g-3 needs-validation" novalidate>
				<div class="login-box rounded-2 p-5">
					<div class="login-form">
						<a href="index.html" class="login-logo mb-3">
							<img src="assets/images/logo.svg" alt="Best Admin Dashboards" />
						</a>
						<h5 class="fw-light mb-5">로그인</h5>
						<div class="mb-3">
							<label  for="validationID" class="form-label">관리자ID</label>
							<input type="text" class="form-control" id="validationID" placeholder="ID를 입력하세요" required/>
							<div class="invalid-feedback">
								ID를 입력하세요
							</div>
						</div>
						<div class="mb-3">
							<label for="validationPassword" class="form-label">비밀번호</label>
							<input type="password" class="form-control" id="validationPassword" placeholder="비밀번호를 입력하세요" required/>
							<div class="invalid-feedback">
								비밀번호를 입력하세요
							</div>
						</div>
						<div class="d-flex align-items-center justify-content-between">
							<div class="form-check m-0">
								<input class="form-check-input" type="checkbox" value="" id="rememberPassword" />
								<label class="form-check-label" for="rememberPassword">비밀번호 저장</label>
							</div>
							<a href="forgot-password.html" class="text-blue text-decoration-underline">비밀번호 찾기</a>
						</div>
						<div class="d-grid py-3">
							<button type="submit" id="buttonSignIn" name="buttonSignIn" class="btn btn-lg btn-primary">
								로그인
							</button>
						</div>
						<div class="text-center py-3">or login with</div>
						<div class="d-flex gap-2 justify-content-center">
							<button type="submit" class="btn btn-outline-light">
								<img src="assets/images/google.svg" class="login-icon" alt="Login with Google" />
							</button>
							<button type="submit" class="btn btn-outline-light">
								<img src="assets/images/facebook.svg" class="login-icon" alt="Login with Facebook" />
							</button>
						</div>
						<div class="text-center pt-3">
							<span>Not registered?</span>
							<a href="signup.html" class="text-blue text-decoration-underline ms-2">
								회원가입</a>
						</div>
					</div>
				</div>
			</form>
		</div>
		<!-- Login box end -->

		<!-- Main Js Required -->
		<script src="assets/js/main.js"></script>
		<script src="assets/js/validations.js"></script>
	</body>
	
	<script type="text/javascript">
	document.getElementById("buttonSignIn").onclick = function () {
		
		if(validation() == false) return false;
	
		$.ajax({
			async: true 
			,cache: false
			,type: "post"
			/* ,dataType:"json" */
			,url: "/infra/member/memberSignIn"
			/* ,data : $("#formLogin").serialize() */
			,data : { "memberID" : $("#memberID").val(), "memberPassword" : $("#memberPassword").val(), "autoLogin" : $("#autoLogin").is(":checked")}
			,success: function(response) {
				if(response.rt == "success") {
					if(response.changePwd == "true") {
						location.href = "/infra/member/expiredPwdUsrForm";
					} else {
						location.href = "/infra/index/memberSigIn";
					}
				} // else {
// 			 		document.getElementById("modalAlertTitle").innerText = "확 인";
// 			 		document.getElementById("modalAlertBody").innerText = "일치하는 회원이 존재 하지 않습니다!";
// 			 		$("#modalAlert").modal("show");
// 				}
			}
			,error : function(jqXHR, textStatus, errorThrown){
				alert("ajaxUpdate " + jqXHR.textStatus + " : " + jqXHR.errorThrown);
			}
		});
	}
	
	</script>	
	

</html>